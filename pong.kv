#:kivy 1.0.9

<PongBall>:
    #:set r 50
    size: r, r
    canvas:
        Color:
            rgb: .99, .82, .1, 1
        Ellipse:
            pos: self.pos
            size: self.size     # we don't put size here, otherwise when we center the widget, the ball won't, because canvas refer to the right up as 0,0

#:set pl_w 26
#:set pl_h 150
#:set paddle_edge_h (pl_h * 1/4)
<PongPaddleEdge>:                   # make the ball bounces different
    size: pl_w, paddle_edge_h
    canvas:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            size: self.width, paddle_edge_h
            pos: self.pos

<PongPaddle>:
    size: pl_w, pl_h
    paddle_high: paddle_high
    paddle_low: paddle_low
    canvas:        
        # Color:
        #     rgb: 1, 0, 0
        Rectangle:
            size: self.width, self.height * 3/4
            pos: self.pos
    PongPaddleEdge:
        id: paddle_high
        pos: (root.x, root.y + (root.height * 3/4))
    PongPaddleEdge:
        id: paddle_low
        pos: (root.x, root.y - (paddle_edge_h))


<PongGame>:
    ball: pong_ball     # "ball" variable declared in PongGame
    player1: player1    # "player1" variable declared in PongGame
    player2: player2    # "player2" variable declared in PongGame
    canvas:
        Rectangle:
            size: 14, self.height
            pos: (self.center_x-7, 0)
    PongPaddle:
        id: player1
        pos: (0, self.parent.center_y-pl_h/2)
        # pos: 20, self.parent.height
    PongPaddle:
        id: player2
        pos: (self.parent.width-self.width, self.parent.center_y-pl_h/2)
    PongBall:
        id: pong_ball
        center: self.parent.center  # it will set is center, in the center of the parent widget(PongGame)

    # player1 score
    Label:
        text: str(root.player1.score)
        font_size: 70
        center_x: root.width * 1/4
        top: root.height * 10/11
    # player2 score
    Label:
        text: str(root.player2.score)
        font_size: 70
        center_x: root.width * 3/4
        top: root.height * 10/11

